<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcun icon" href="image/logo-black.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk&display=swap" rel="stylesheet">
    <title>CaleN7drier</title>
  </head>
  <body>
    <header>
        <h1>CaleN7drier</h1>
        <div id ="headerDroite">
          <p>Pour plus jamais sécher par &quoterreur&quot</p>
          <img src="image/logo-white.png" id="logoMobile">
          <img src="image/logo-white.png" id="logoPC">
        </div>
    </header>
    
    <section class="content">
      <div class="menu">
        <form class="card" id="form">
          <div id="menuSearch">
            <p>Identifiant planète INP :</p>
            <div id ="searchBar">
              <label>
                <input id="identifiant" type="text" />
              </label>
              
              <button type="submit">Valider</button>
            </div>
          </div>
          
          <h2>URL à utiliser : </h2>
          <section class="url">
            <div class="loading hidden">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                width="108px"
                height="108px"
                viewBox="0 0 100 100"
                preserveAspectRatio="xMidYMid"
              >
                <g transform="translate(50 50)">
                  <g transform="matrix(1,0,0,1,0,0)">
                    <path
                      d="M28.91366458960192 -8 L39.91366458960192 -8 L39.91366458960192 8 L28.91366458960192 8 A30 30 0 0 1 26.101902549753255 14.78819405076849 L26.101902549753255 14.78819405076849 L33.88007714280528 22.56636864382051 L22.566368643820514 33.88007714280528 L14.788194050768492 26.101902549753255 A30 30 0 0 1 8.000000000000002 28.91366458960192 L8.000000000000002 28.91366458960192 L8.000000000000002 39.91366458960192 L-7.999999999999997 39.91366458960192 L-7.999999999999998 28.91366458960192 A30 30 0 0 1 -14.788194050768489 26.101902549753255 L-14.788194050768489 26.101902549753255 L-22.56636864382051 33.88007714280528 L-33.88007714280528 22.566368643820518 L-26.10190254975325 14.788194050768494 A30 30 0 0 1 -28.91366458960192 8.000000000000004 L-28.91366458960192 8.000000000000004 L-39.91366458960192 8.000000000000005 L-39.91366458960192 -7.999999999999995 L-28.91366458960192 -7.9999999999999964 A30 30 0 0 1 -26.101902549753255 -14.788194050768489 L-26.101902549753255 -14.788194050768489 L-33.88007714280528 -22.56636864382051 L-22.566368643820518 -33.88007714280528 L-14.788194050768496 -26.10190254975325 A30 30 0 0 1 -8.000000000000007 -28.91366458960192 L-8.000000000000007 -28.91366458960192 L-8.000000000000009 -39.91366458960192 L7.999999999999992 -39.91366458960192 L7.999999999999995 -28.91366458960192 A30 30 0 0 1 14.788194050768487 -26.10190254975326 L14.788194050768487 -26.10190254975326 L22.566368643820507 -33.880077142805284 L33.88007714280527 -22.56636864382052 L26.10190254975325 -14.788194050768498 A30 30 0 0 1 28.913664589601918 -8.000000000000009 M0 -11A11 11 0 1 0 0 11 A11 11 0 1 0 0 -11"
                      fill="#0a0a0a"
                    ></path>
                  </g>
                </g>
                <!-- generated by https://loading.io/ -->
              </svg>
      
              Chargement en cours... (peut prendre une trentaine de secondes)
            </div>
            <code id="url"></code>
          </section>
        </form>
    
        <section class="how card">
          <h2>Comment faire?</h2>
          <div class="introTuto">
            <p>Pour Google Agenda</p>
            <img src="image/Google_Calendar_icon_(2020).png" class="calendrierLogo">
          </div>
          <ol class="custom-counter">
            <li><p>Il faut être sur ordi</p></li>
            <li><p>Copiez l'URL</p></li>
            <li>
              <a href="https://calendar.google.com/calendar/u/0/r/settings/addbyurl" target="_blank"><p>Ajoutez un calendrier depuis une URL</p></a>
            </li>
            <li><p>Collez l'URL</p></li>
          </ol>
        </section>
      </div>
    </section>

    <section class="bottom">
      <div class="bottomMenu">
        <img src="image/net7-n7_x224.png" id="contactLogo">
        <div id ="contact">
          <h2>Nous contacter :</h2>
          <ul>
            <li><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Email</li>
            <li><a href="https://churros.inpt.fr/groups/net7-n7/">Churros Net7</a></li>
          </ul>
        </div>
      </div>
      
      <div id="credit">
        <p>Site réalisé par 
          <a href="https://instagram.com/benjamin.syr?igshid=MzMyNGUyNmU2YQ==">&nbsp;Benjamin Soyer&nbsp;</a>et&nbsp;<a href="https://fr.ewen.works/about"> Ewen Le Bihan</a></p>
      </div>
      
    </section>
    

    <script>
      document.getElementById("form").addEventListener("submit", (event) => {
        console.log("got submit")
        event.preventDefault()
        document.querySelector(".loading").classList.remove("hidden")
        const uid = document.getElementById("identifiant").value
        fetch(`/${uid}/url`)
          .then((response) => response.text())
          .catch((error) => "Erreur interne, réessayes plus tard")
          .then((text) => {
            if (text == "internal error")
              text = "Erreur interne, réessaye plus tard"
            document.getElementById("url").innerText = text
            document.querySelector(".loading").classList.add("hidden")
          })
      })
    </script>

  </body>
</html>
